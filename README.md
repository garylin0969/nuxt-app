# Nuxt 3 å­¸ç¿’ç¯„ä¾‹

> å¾ React/Next.js åˆ° Vue/Nuxt çš„å®Œæ•´å­¸ç¿’æŒ‡å—

é€™æ˜¯ä¸€å€‹å°ˆç‚ºæœ‰ React æˆ– Next.js ç¶“é©—çš„é–‹ç™¼è€…è¨­è¨ˆçš„ Nuxt 3 å­¸ç¿’ç¯„ä¾‹å°ˆæ¡ˆã€‚é€éå¯¦éš›çš„ç¨‹å¼ç¢¼ç¯„ä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ Nuxt 3 å»ºç«‹ç¾ä»£åŒ–çš„ Web æ‡‰ç”¨ç¨‹å¼ã€‚

## ğŸš€ å°ˆæ¡ˆç‰¹è‰²

-   **ğŸ¯ é‡å° React é–‹ç™¼è€…è¨­è¨ˆ**ï¼šæä¾›å¾ React/Next.js åˆ° Vue/Nuxt çš„å®Œæ•´è½‰æ›æŒ‡å—
-   **ğŸ“š å®Œæ•´çš„å­¸ç¿’ç¯„ä¾‹**ï¼šåŒ…å« SSRã€ISRã€SSGã€CSR ç­‰ä¸åŒæ¸²æŸ“æ¨¡å¼
-   **ğŸ¨ ç¾ä»£åŒ– UI**ï¼šä½¿ç”¨ Shadcn/ui å…ƒä»¶åº«å’Œ Tailwind CSS
-   **ğŸ—ï¸ åŸå­è¨­è¨ˆæ¶æ§‹**ï¼šéµå¾ª Atomic Design åŸå‰‡çš„å…ƒä»¶çµ„ç¹”
-   **ğŸ’ª TypeScript æ”¯æ´**ï¼šå®Œæ•´çš„é¡å‹å®šç¾©å’Œå‹åˆ¥å®‰å…¨
-   **ğŸ”§ è¡¨å–®é©—è­‰**ï¼šä½¿ç”¨ vee-validate å’Œ zod é€²è¡Œå¼·å¤§çš„è¡¨å–®é©—è­‰
-   **ğŸ—„ï¸ ç‹€æ…‹ç®¡ç†**ï¼šä½¿ç”¨ Pinia é€²è¡Œç‹€æ…‹ç®¡ç†
-   **ğŸŒ API æ•´åˆ**ï¼šèˆ‡ JSONPlaceholder API æ•´åˆçš„å®Œæ•´ç¯„ä¾‹

## ğŸ“¦ æŠ€è¡“æ£§

### æ ¸å¿ƒæŠ€è¡“

-   **Nuxt 3** - ç¾ä»£åŒ–çš„ Vue æ¡†æ¶
-   **Vue 3** - æ¼¸é€²å¼ JavaScript æ¡†æ¶
-   **TypeScript** - å‹åˆ¥å®‰å…¨çš„ JavaScript è¶…é›†
-   **Tailwind CSS** - å¯¦ç”¨å„ªå…ˆçš„ CSS æ¡†æ¶

### UI å…ƒä»¶åº«

-   **Shadcn/ui** - ç¾è§€ä¸”å¯å®¢è£½åŒ–çš„ UI å…ƒä»¶
-   **Lucide Icons** - ç²¾ç¾çš„åœ–ç¤ºåº«
-   **Tailwind CSS** - éŸ¿æ‡‰å¼è¨­è¨ˆ

### ç‹€æ…‹ç®¡ç†èˆ‡è³‡æ–™ç²å–

-   **Pinia** - Vue ç”Ÿæ…‹ç³»çµ±çš„ç‹€æ…‹ç®¡ç†åº«
-   **useFetch** - Nuxt 3 å…§å»ºçš„è³‡æ–™ç²å–å·¥å…·
-   **$fetch** - åŸºæ–¼ ofetch çš„ HTTP ç”¨æˆ¶ç«¯

### è¡¨å–®èˆ‡é©—è­‰

-   **vee-validate** - å¼·å¤§çš„è¡¨å–®é©—è­‰åº«
-   **zod** - é¡å‹å®‰å…¨çš„ schema é©—è­‰
-   **@vee-validate/zod** - vee-validate çš„ zod æ•´åˆ

### é–‹ç™¼å·¥å…·

-   **ESLint** - ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥
-   **Prettier** - ç¨‹å¼ç¢¼æ ¼å¼åŒ–
-   **@nuxt/devtools** - é–‹ç™¼è€…å·¥å…·

## ğŸ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

-   Node.js 18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
-   pnpm (æ¨è–¦) æˆ– npm

### å®‰è£æ­¥é©Ÿ

1. **å…‹éš†å°ˆæ¡ˆ**

```bash
git clone <repository-url>
cd nuxt-app
```

2. **å®‰è£ä¾è³´**

```bash
pnpm install
```

3. **å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨**

```bash
pnpm dev
```

4. **é–‹å•Ÿç€è¦½å™¨**
   é–‹å•Ÿ http://localhost:3000 æŸ¥çœ‹å°ˆæ¡ˆ

### å»ºç½®å°ˆæ¡ˆ

```bash
# å»ºç½®ç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒ
pnpm build

# é è¦½å»ºç½®çµæœ
pnpm preview

# ç”Ÿæˆéœæ…‹ç«™é»
pnpm generate
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
nuxt-app/
â”œâ”€â”€ assets/                    # éœæ…‹è³‡æº
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ main.css          # å…¨åŸŸæ¨£å¼
â”œâ”€â”€ components/               # Vue å…ƒä»¶
â”‚   â”œâ”€â”€ atoms/               # åŸå­å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ loading-spinner.vue
â”‚   â”‚   â””â”€â”€ error-message.vue
â”‚   â”œâ”€â”€ molecules/           # åˆ†å­å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ user-card.vue
â”‚   â”‚   â””â”€â”€ post-card.vue
â”‚   â”œâ”€â”€ organisms/           # æœ‰æ©Ÿé«”å…ƒä»¶
â”‚   â”œâ”€â”€ templates/           # æ¨¡æ¿å…ƒä»¶
â”‚   â””â”€â”€ ui/                  # Shadcn å…ƒä»¶
â”‚       â”œâ”€â”€ button/
â”‚       â”œâ”€â”€ card/
â”‚       â”œâ”€â”€ input/
â”‚       â””â”€â”€ ...
â”œâ”€â”€ composables/             # å¯çµ„åˆå‡½æ•¸
â”‚   â”œâ”€â”€ useApi.ts           # API å‘¼å«
â”‚   â”œâ”€â”€ useUsers.ts         # ä½¿ç”¨è€…ç›¸é—œ
â”‚   â””â”€â”€ usePosts.ts         # æ–‡ç« ç›¸é—œ
â”œâ”€â”€ layouts/                 # å¸ƒå±€å…ƒä»¶
â”‚   â””â”€â”€ default.vue         # é è¨­å¸ƒå±€
â”œâ”€â”€ pages/                   # é é¢å…ƒä»¶
â”‚   â”œâ”€â”€ index.vue           # é¦–é  (SSR)
â”‚   â”œâ”€â”€ users/              # ä½¿ç”¨è€…ç›¸é—œé é¢
â”‚   â”‚   â””â”€â”€ index.vue       # ä½¿ç”¨è€…åˆ—è¡¨ (SSR)
â”‚   â”œâ”€â”€ posts/              # æ–‡ç« ç›¸é—œé é¢
â”‚   â”‚   â””â”€â”€ index.vue       # æ–‡ç« åˆ—è¡¨ (CSR)
â”‚   â”œâ”€â”€ rendering/          # æ¸²æŸ“ç¯„ä¾‹
â”‚   â”‚   â””â”€â”€ index.vue       # æ¸²æŸ“æ¨¡å¼èªªæ˜
â”‚   â””â”€â”€ forms/              # è¡¨å–®ç¯„ä¾‹
â”‚       â””â”€â”€ index.vue       # è¡¨å–®é©—è­‰ç¯„ä¾‹
â”œâ”€â”€ stores/                  # Pinia ç‹€æ…‹ç®¡ç†
â”‚   â””â”€â”€ useUserStore.ts     # ä½¿ç”¨è€…ç‹€æ…‹
â”œâ”€â”€ types/                   # TypeScript é¡å‹å®šç¾©
â”‚   â””â”€â”€ index.ts            # é€šç”¨é¡å‹
â”œâ”€â”€ lib/                     # å·¥å…·åº«
â”‚   â””â”€â”€ utils.ts            # é€šç”¨å·¥å…·å‡½æ•¸
â”œâ”€â”€ nuxt.config.ts          # Nuxt é…ç½®
â”œâ”€â”€ package.json            # å°ˆæ¡ˆä¾è³´
â”œâ”€â”€ tailwind.config.js      # Tailwind CSS é…ç½®
â”œâ”€â”€ components.json         # Shadcn å…ƒä»¶é…ç½®
â””â”€â”€ README.md               # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

## ğŸ¯ åŠŸèƒ½ç‰¹è‰²

### 1. å¤šç¨®æ¸²æŸ“æ¨¡å¼

å°ˆæ¡ˆå±•ç¤ºäº† Nuxt 3 çš„å››ç¨®ä¸»è¦æ¸²æŸ“æ¨¡å¼ï¼š

#### SSR (Server-Side Rendering)

-   **ç¯„ä¾‹é é¢**ï¼š`/users` - ä½¿ç”¨è€…åˆ—è¡¨é é¢
-   **ç‰¹è‰²**ï¼šæ¯æ¬¡è«‹æ±‚æ™‚åœ¨ä¼ºæœå™¨ç«¯ç”Ÿæˆ HTML
-   **é©ç”¨å ´æ™¯**ï¼šéœ€è¦ SEO å„ªåŒ–å’Œå³æ™‚è³‡æ–™çš„é é¢

#### CSR (Client-Side Rendering)

-   **ç¯„ä¾‹é é¢**ï¼š`/posts` - æ–‡ç« åˆ—è¡¨é é¢
-   **ç‰¹è‰²**ï¼šåœ¨å®¢æˆ¶ç«¯å‹•æ…‹è¼‰å…¥å’Œæ¸²æŸ“å…§å®¹
-   **é©ç”¨å ´æ™¯**ï¼šé«˜åº¦äº’å‹•çš„æ‡‰ç”¨ç¨‹å¼

#### SSG (Static Site Generation)

-   **ç‰¹è‰²**ï¼šåœ¨å»ºç½®æ™‚é å…ˆç”Ÿæˆéœæ…‹ HTML
-   **é©ç”¨å ´æ™¯**ï¼šå…§å®¹ä¸ç¶“å¸¸è®Šå‹•çš„é é¢

#### ISR (Incremental Static Regeneration)

-   **ç‰¹è‰²**ï¼šçµåˆéœæ…‹ç”Ÿæˆå’Œå‹•æ…‹æ›´æ–°
-   **é©ç”¨å ´æ™¯**ï¼šéœ€è¦å¿«é€Ÿè¼‰å…¥ä½†å…§å®¹æœƒå®šæœŸæ›´æ–°çš„é é¢

### 2. åŸå­è¨­è¨ˆæ¶æ§‹

å°ˆæ¡ˆæ¡ç”¨ Atomic Design åŸå‰‡çµ„ç¹”å…ƒä»¶ï¼š

-   **Atoms (åŸå­)**ï¼šæœ€å°çš„ UI å…ƒä»¶

    -   `loading-spinner.vue` - è¼‰å…¥å‹•ç•«
    -   `error-message.vue` - éŒ¯èª¤è¨Šæ¯

-   **Molecules (åˆ†å­)**ï¼šç”±åŸå­çµ„æˆçš„ç°¡å–®å…ƒä»¶

    -   `user-card.vue` - ä½¿ç”¨è€…å¡ç‰‡
    -   `post-card.vue` - æ–‡ç« å¡ç‰‡

-   **Organisms (æœ‰æ©Ÿé«”)**ï¼šè¤‡é›œçš„ UI å€å¡Š
-   **Templates (æ¨¡æ¿)**ï¼šé é¢ç´šåˆ¥çš„å…ƒä»¶å¸ƒå±€
-   **Pages (é é¢)**ï¼šå…·é«”çš„é é¢å¯¦ç¾

### 3. ç‹€æ…‹ç®¡ç†

ä½¿ç”¨ Pinia é€²è¡Œç‹€æ…‹ç®¡ç†ï¼š

```typescript
// stores/useUserStore.ts
export const useUserStore = defineStore('user', () => {
    const users = ref<User[]>([]);
    const currentUser = ref<User | null>(null);

    const fetchUsers = async () => {
        // è¼‰å…¥ä½¿ç”¨è€…è³‡æ–™
    };

    return {
        users,
        currentUser,
        fetchUsers,
    };
});
```

### 4. API æ•´åˆ

æä¾›å®Œæ•´çš„ API æ•´åˆç¯„ä¾‹ï¼š

```typescript
// composables/useApi.ts
export const useApi = () => {
  const get = async <T>(endpoint: string) => {
    return await $fetch<T>(`https://jsonplaceholder.typicode.com${endpoint}`)
  }

  return { get, post, put, delete }
}
```

### 5. è¡¨å–®é©—è­‰

ä½¿ç”¨ vee-validate å’Œ zod é€²è¡Œå¼·å¤§çš„è¡¨å–®é©—è­‰ï¼š

```vue
<script setup>
import { z } from 'zod';
import { useForm } from 'vee-validate';
import { toTypedSchema } from '@vee-validate/zod';

const validationSchema = toTypedSchema(
    z.object({
        name: z.string().min(2, 'å§“åè‡³å°‘éœ€è¦ 2 å€‹å­—å…ƒ'),
        email: z.string().email('è«‹è¼¸å…¥æœ‰æ•ˆçš„ Email æ ¼å¼'),
        password: z.string().min(8, 'å¯†ç¢¼è‡³å°‘éœ€è¦ 8 å€‹å­—å…ƒ'),
    })
);

const { handleSubmit, errors } = useForm({ validationSchema });
</script>
```

## ğŸ”§ é…ç½®èªªæ˜

### Nuxt é…ç½®

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
    modules: ['@nuxt/eslint', '@nuxt/fonts', '@nuxt/icon', '@nuxt/image', '@pinia/nuxt', 'shadcn-nuxt'],
    css: ['~/assets/css/main.css'],
    shadcn: {
        prefix: '',
        componentDir: './components/ui',
    },
});
```

### Shadcn é…ç½®

```json
// components.json
{
    "style": "default",
    "rsc": false,
    "tsx": false,
    "tailwind": {
        "config": "tailwind.config.js",
        "css": "assets/css/main.css",
        "baseColor": "slate",
        "cssVariables": true
    },
    "aliases": {
        "components": "~/components",
        "utils": "~/lib/utils"
    }
}
```

## ğŸŒŸ å­¸ç¿’æŒ‡å—

### å¾ React åˆ° Vue

å¦‚æœæ‚¨ä¾†è‡ª React èƒŒæ™¯ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›é—œéµçš„å°æ‡‰é—œä¿‚ï¼š

| React         | Vue                     | èªªæ˜         |
| ------------- | ----------------------- | ------------ |
| `useState`    | `ref` / `reactive`      | ç‹€æ…‹ç®¡ç†     |
| `useEffect`   | `watch` / `watchEffect` | å‰¯ä½œç”¨è™•ç†   |
| `useMemo`     | `computed`              | è¨ˆç®—å±¬æ€§     |
| `useCallback` | `computed`              | å‡½æ•¸è¨˜æ†¶åŒ–   |
| `useContext`  | `provide` / `inject`    | ä¾è³´æ³¨å…¥     |
| `zustand`     | `useStore` (Pinia)      | è¤‡é›œç‹€æ…‹ç®¡ç† |

### å¾ Next.js åˆ° Nuxt

| Next.js                     | Nuxt                       | èªªæ˜             |
| --------------------------- | -------------------------- | ---------------- |
| `async function Page()`     | `definePageMeta`           | é é¢é…ç½®         |
| `generateMetadata`          | `useSeoMeta`               | SEO å…ƒè³‡æ–™       |
| `generateStaticParams`      | `defineStaticPaths`        | éœæ…‹è·¯å¾‘ç”Ÿæˆ     |
| `useRouter`                 | `useRouter`                | è·¯ç”±æ“ä½œ         |
| `next/image`                | `NuxtImg`                  | åœ–ç‰‡æœ€ä½³åŒ–       |
| `fetch` in Server Component | `useFetch` (server: true)  | ä¼ºæœå™¨ç«¯è³‡æ–™ç²å– |
| `fetch` in Client Component | `useFetch` (server: false) | å®¢æˆ¶ç«¯è³‡æ–™ç²å–   |
| `loading.tsx`               | `NuxtLoadingIndicator`     | è¼‰å…¥ç‹€æ…‹         |
| `error.tsx`                 | `error.vue`                | éŒ¯èª¤è™•ç†         |
| `layout.tsx`                | `layouts/default.vue`      | å¸ƒå±€å®šç¾©         |

### è³‡æ–™ç²å–æ¯”è¼ƒ

Nuxt 3 æä¾›äº†ä¸‰ç¨®ä¸»è¦çš„è³‡æ–™ç²å–æ–¹å¼ï¼š

#### 1. useFetch

```typescript
// åœ¨å…ƒä»¶æ›è¼‰æ™‚è‡ªå‹•ç²å–è³‡æ–™
const { data, pending, error, refresh } = await useFetch('/api/posts');
```

ç‰¹é»ï¼š

-   é è¨­åœ¨å…ƒä»¶åˆå§‹åŒ–æ™‚ç«‹å³åŸ·è¡Œ
-   æ”¯æ´ SSRï¼ˆä¼ºæœå™¨ç«¯æ¸²æŸ“ï¼‰å’Œ hydration
-   è‡ªå‹•è™•ç†è¼‰å…¥å’ŒéŒ¯èª¤ç‹€æ…‹
-   å…§å»ºè³‡æ–™å¿«å–å’Œè«‹æ±‚å»é‡
-   æä¾›éŸ¿æ‡‰å¼çš„è³‡æ–™å’Œç‹€æ…‹
-   é©åˆç”¨æ–¼é é¢æˆ–å…ƒä»¶ç´šåˆ¥çš„è³‡æ–™ç²å–

#### 2. useLazyFetch

```typescript
// å»¶é²åŠ è¼‰è³‡æ–™ï¼Œéœ€è¦æ‰‹å‹•è§¸ç™¼
const { data, pending, error, refresh } = useLazyFetch(() => `/api/search?q=${searchQuery.value}`);

// åœ¨äº‹ä»¶è™•ç†ç¨‹åºä¸­æ‰‹å‹•è§¸ç™¼
const handleSearch = () => {
    refresh();
};
```

ç‰¹é»ï¼š

-   ä¸æœƒåœ¨å…ƒä»¶åˆå§‹åŒ–æ™‚è‡ªå‹•åŸ·è¡Œ
-   é©ç”¨æ–¼æ¢ä»¶å¼è³‡æ–™è¼‰å…¥
-   å¯ä»¥é€é refresh() æ‰‹å‹•è§¸ç™¼
-   æ”¯æ´å‹•æ…‹ URL å’Œåƒæ•¸
-   é©åˆç”¨æ–¼åˆ†é ã€æœå°‹ç­‰ä½¿ç”¨è€…äº’å‹•å ´æ™¯

#### 3. $fetch

```typescript
// ç›´æ¥ç™¼é€ HTTP è«‹æ±‚
const handleSubmit = async () => {
    try {
        const response = await $fetch('/api/posts', {
            method: 'POST',
            body: formData,
        });
        // æ‰‹å‹•è™•ç†æˆåŠŸå›æ‡‰
    } catch (error) {
        // æ‰‹å‹•è™•ç†éŒ¯èª¤
    }
};
```

ç‰¹é»ï¼š

-   è¼•é‡ç´šçš„ HTTP å®¢æˆ¶ç«¯
-   ä¸åŒ…å«é¡å¤–çš„ç‹€æ…‹ç®¡ç†
-   éœ€è¦æ‰‹å‹•è™•ç†è¼‰å…¥å’ŒéŒ¯èª¤ç‹€æ…‹
-   é©åˆç”¨æ–¼äº‹ä»¶è™•ç†ç¨‹åºæˆ–éå…ƒä»¶é‚è¼¯

#### å®¢æˆ¶ç«¯è³‡æ–™ç²å–æœ€ä½³å¯¦è¸

```vue
<script setup>
// 1. é é¢å¿…éœ€çš„åˆå§‹è³‡æ–™ï¼šä½¿ç”¨ useFetch
const { data: posts } = await useFetch('/api/posts', {
    // å¯ä»¥è¨­å®šå¿«å–ç­–ç•¥
    cache: 'memory',
});

// 2. ä½¿ç”¨è€…äº’å‹•è§¸ç™¼çš„è³‡æ–™è¼‰å…¥ï¼šä½¿ç”¨ useLazyFetch
const { data: searchResults, refresh: refreshSearch } = useLazyFetch(() => ({
    url: '/api/search',
    query: { q: searchQuery.value },
}));

// 3. è¡¨å–®æäº¤æˆ–å…¶ä»– HTTP è«‹æ±‚ï¼šä½¿ç”¨ $fetch
const handleSubmit = async () => {
    try {
        await $fetch('/api/posts', {
            method: 'POST',
            body: formData,
        });
        // è™•ç†æˆåŠŸ
    } catch (error) {
        // è™•ç†éŒ¯èª¤
    }
};
</script>

<template>
    <!-- å±•ç¤ºä¸»è¦å…§å®¹ -->
    <div v-if="posts">
        <PostList :posts="posts" />
    </div>

    <!-- æœå°‹åŠŸèƒ½ -->
    <div>
        <input v-model="searchQuery" @input="refreshSearch" />
        <div v-if="searchResults">
            <SearchResults :results="searchResults" />
        </div>
    </div>

    <!-- è¡¨å–®æäº¤ -->
    <form @submit.prevent="handleSubmit">
        <!-- è¡¨å–®å…§å®¹ -->
    </form>
</template>
```

#### é¸æ“‡å»ºè­°

1. **ä½¿ç”¨ useFetch ç•¶ï¼š**

    - éœ€è¦åœ¨å…ƒä»¶è¼‰å…¥æ™‚å°±ç²å–è³‡æ–™ï¼ˆå¦‚é é¢ä¸»è¦å…§å®¹ï¼‰
    - éœ€è¦ SSR æ”¯æ´å’Œè‡ªå‹• hydration
    - éœ€è¦è‡ªå‹•çš„è¼‰å…¥ç‹€æ…‹å’ŒéŒ¯èª¤è™•ç†
    - éœ€è¦è³‡æ–™å¿«å–å’Œè«‹æ±‚å»é‡

2. **ä½¿ç”¨ useLazyFetch ç•¶ï¼š**

    - éœ€è¦å»¶é²è¼‰å…¥è³‡æ–™ï¼ˆå¦‚æ¬¡è¦å…§å®¹ï¼‰
    - éœ€è¦æ ¹æ“šä½¿ç”¨è€…äº’å‹•è¼‰å…¥è³‡æ–™ï¼ˆå¦‚æœå°‹ã€ç¯©é¸ï¼‰
    - éœ€è¦å‹•æ…‹ URL æˆ–æŸ¥è©¢åƒæ•¸
    - éœ€è¦æ‰‹å‹•æ§åˆ¶è³‡æ–™é‡æ–°è¼‰å…¥

3. **ä½¿ç”¨ $fetch ç•¶ï¼š**
    - åœ¨äº‹ä»¶è™•ç†ç¨‹åºä¸­ç™¼é€è«‹æ±‚ï¼ˆå¦‚è¡¨å–®æäº¤ï¼‰
    - åœ¨ Pinia store ä¸­é€²è¡Œè³‡æ–™ç²å–
    - éœ€è¦å®Œå…¨æ§åˆ¶è«‹æ±‚çš„ç”Ÿå‘½é€±æœŸ
    - ä¸éœ€è¦éŸ¿æ‡‰å¼è³‡æ–™å’Œè‡ªå‹•ç‹€æ…‹ç®¡ç†

é€™æ¨£çš„å€åˆ†å¯ä»¥è®“æ‚¨çš„æ‡‰ç”¨ç¨‹å¼ï¼š

-   æœ‰æ›´å¥½çš„æ•ˆèƒ½ï¼ˆé¿å…ä¸å¿…è¦çš„è«‹æ±‚ï¼‰
-   æ›´å¥½çš„ä½¿ç”¨è€…é«”é©—ï¼ˆé©æ™‚è¼‰å…¥è³‡æ–™ï¼‰
-   æ›´å¥½çš„ç‹€æ…‹ç®¡ç†ï¼ˆè‡ªå‹•è™•ç†è¼‰å…¥ç‹€æ…‹ï¼‰
-   æ›´å¥½çš„ç¨‹å¼ç¢¼çµ„ç¹”ï¼ˆä¾æ“šç”¨é€”é¸æ“‡é©ç•¶çš„ APIï¼‰

### æ¸²æŸ“æ¨¡å¼è¨­å®š

Nuxt 3 æä¾›äº†å¤šç¨®æ–¹å¼ä¾†æ§åˆ¶é é¢çš„æ¸²æŸ“æ¨¡å¼ï¼š

#### 1. å…¨åŸŸè¨­å®šï¼ˆnuxt.config.tsï¼‰

```typescript
export default defineNuxtConfig({
    // é è¨­ç‚º 'universal'
    ssr: true, // å•Ÿç”¨ SSR
    // éœæ…‹ç¶²ç«™ç”Ÿæˆ
    nitro: {
        prerender: {
            routes: ['/about', '/blog/[id]'],
        },
    },
});
```

#### 2. é é¢ç´šåˆ¥è¨­å®š

```typescript
// pages/about.vue
definePageMeta({
    // SSRï¼ˆé è¨­ï¼‰
    ssr: true,

    // CSRï¼ˆç¦ç”¨ SSRï¼‰
    ssr: false,

    // SSGï¼ˆéœæ…‹ç”Ÿæˆï¼‰
    static: true,

    // ISRï¼ˆå¢é‡å¼éœæ…‹å†ç”Ÿæˆï¼‰
    static: true,
    revalidate: 60, // 60 ç§’å¾Œé‡æ–°é©—è­‰
});
```

#### 3. è·¯ç”±è¦å‰‡ï¼ˆnuxt.config.tsï¼‰

```typescript
export default defineNuxtConfig({
    routeRules: {
        // SSR - å‹•æ…‹æ¸²æŸ“
        '/admin/**': { ssr: true },

        // CSR - åƒ…å®¢æˆ¶ç«¯æ¸²æŸ“
        '/dashboard/**': { ssr: false },

        // SSG - éœæ…‹ç”Ÿæˆ
        '/blog/**': { static: true },

        // ISR - å¢é‡å¼éœæ…‹å†ç”Ÿæˆ
        '/products/**': {
            static: true,
            revalidate: 60, // 60 ç§’å¾Œé‡æ–°é©—è­‰
        },

        // å¿«å–ç­–ç•¥
        '/api/**': {
            cache: {
                maxAge: 60, // å¿«å– 60 ç§’
            },
        },
    },
});
```

#### æ¸²æŸ“æ¨¡å¼åˆ¤å®šé‚è¼¯

1. **SSRï¼ˆä¼ºæœå™¨ç«¯æ¸²æŸ“ï¼‰**

    - é è¨­æ¨¡å¼
    - `ssr: true` ä¸”æœªè¨­å®š `static: true`
    - é©ç”¨æ–¼éœ€è¦å³æ™‚è³‡æ–™çš„é é¢

2. **CSRï¼ˆå®¢æˆ¶ç«¯æ¸²æŸ“ï¼‰**

    - è¨­å®š `ssr: false`
    - é©ç”¨æ–¼é«˜åº¦äº’å‹•ä¸”ä¸éœ€è¦ SEO çš„é é¢

3. **SSGï¼ˆéœæ…‹ç¶²ç«™ç”Ÿæˆï¼‰**

    - è¨­å®š `static: true`
    - åœ¨å»ºç½®æ™‚ç”Ÿæˆéœæ…‹ HTML
    - é©ç”¨æ–¼å…§å®¹å›ºå®šçš„é é¢

4. **ISRï¼ˆå¢é‡å¼éœæ…‹å†ç”Ÿæˆï¼‰**
    - è¨­å®š `static: true` å’Œ `revalidate`
    - çµåˆ SSG çš„æ•ˆèƒ½å’Œå‹•æ…‹å…§å®¹çš„å³æ™‚æ€§
    - é©ç”¨æ–¼éœ€è¦å®šæœŸæ›´æ–°çš„é é¢

#### æœ€ä½³å¯¦è¸å»ºè­°

-   **å‹•æ…‹å…§å®¹ç‚ºä¸»çš„é é¢**ï¼šä½¿ç”¨ SSR

    ```typescript
    definePageMeta({ ssr: true });
    ```

-   **ç®¡ç†å¾Œå°/å„€è¡¨æ¿**ï¼šä½¿ç”¨ CSR

    ```typescript
    definePageMeta({ ssr: false });
    ```

-   **è¡ŒéŠ·/æ–‡æª”é é¢**ï¼šä½¿ç”¨ SSG

    ```typescript
    definePageMeta({ static: true });
    ```

-   **é›»å•†ç”¢å“é é¢**ï¼šä½¿ç”¨ ISR
    ```typescript
    definePageMeta({
        static: true,
        revalidate: 3600, // æ¯å°æ™‚æ›´æ–°ä¸€æ¬¡
    });
    ```

## ğŸ“š API åƒè€ƒ

### Composables

#### useApi()

é€šç”¨çš„ API å‘¼å«å·¥å…·

```typescript
const { get, post, put, delete } = useApi()
```

#### useUsers()

ä½¿ç”¨è€…ç›¸é—œçš„ API æ“ä½œ

```typescript
const { getUsers, getUserById, createUser, updateUser, deleteUser } = useUsers();
```

#### usePosts()

æ–‡ç« ç›¸é—œçš„ API æ“ä½œ

```typescript
const { getPosts, getPostById, createPost, updatePost, deletePost } = usePosts();
```

### Stores

#### useUserStore()

ä½¿ç”¨è€…ç‹€æ…‹ç®¡ç†

```typescript
const userStore = useUserStore();
await userStore.fetchUsers();
```

### Components

#### UserCard

ä½¿ç”¨è€…è³‡è¨Šå¡ç‰‡å…ƒä»¶

```vue
<UserCard :user="user" @view-posts="handleViewPosts" @edit-user="handleEditUser" />
```

#### PostCard

æ–‡ç« å¡ç‰‡å…ƒä»¶

```vue
<PostCard
    :post="post"
    @view-comments="handleViewComments"
    @edit-post="handleEditPost"
    @delete-post="handleDeletePost"
/>
```

## ğŸš€ éƒ¨ç½²

### Vercel éƒ¨ç½²

```bash
# å®‰è£ Vercel CLI
npm i -g vercel

# éƒ¨ç½²åˆ° Vercel
vercel
```

### Netlify éƒ¨ç½²

```bash
# å»ºç½®å°ˆæ¡ˆ
pnpm build

# éƒ¨ç½²åˆ° Netlify
netlify deploy --prod --dir=.output/public
```

### Docker éƒ¨ç½²

```dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .
RUN npm run build

EXPOSE 3000

CMD ["node", ".output/server/index.mjs"]
```
